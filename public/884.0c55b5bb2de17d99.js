"use strict";(self.webpackChunkSurveyManager=self.webpackChunkSurveyManager||[]).push([[884],{2884:(M,c,a)=>{a.r(c),a.d(c,{AdminModule:()=>Z});var m=a(9808),s=a(2382),u=a(8698),h=a(7453),e=a(1223),l=a(4551);function p(t,r){if(1&t&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu(n.errorMessage)}}let f=(()=>{class t{constructor(n,o){this.router=n,this.auth=o}ngOnInit(){this.user=new h.n}authenticate(n){n.valid?this.auth.authenticate(this.user).subscribe(o=>{o.success?(this.auth.storeUserData(o.token,o.user),this.router.navigateByUrl("survey")):this.errorMessage=o.msg}):this.errorMessage="Invalid Username or Password"}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.F0),e.Y36(l.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:22,vars:3,consts:[[1,"container"],[1,"row"],[1,"offset-md-4","col-md-4","mt-5"],["class","alert alert-danger text-center",4,"ngIf"],["autocomplete","off",1,"row","g-3",3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["for","username",1,"form-label"],["type","text","name","username","placeholder","Enter Username","id","username","required","","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["type","password","name","password","placeholder","Enter Password","id","password","required","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12"],["type","submit",1,"btn","btn-primary","col-12"],[1,"fas","fa-sign-in-alt"],["href","/register",1,"btn","btn-link","float-end"],[1,"alert","alert-danger","text-center"]],template:function(n,o){if(1&n){const C=e.EpF();e.TgZ(0,"main",0)(1,"div",1)(2,"div",2),e.YNc(3,p,2,1,"div",3),e.TgZ(4,"h1"),e._uU(5,"Please Login"),e.qZA(),e.TgZ(6,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(C);const i=e.MAs(7);return o.authenticate(i)}),e.TgZ(8,"fieldset",6)(9,"label",7),e._uU(10,"User Name:"),e.qZA(),e.TgZ(11,"input",8),e.NdJ("ngModelChange",function(i){return o.user.username=i}),e.qZA()(),e.TgZ(12,"fieldset",6)(13,"label",9),e._uU(14,"Password:"),e.qZA(),e.TgZ(15,"input",10),e.NdJ("ngModelChange",function(i){return o.user.password=i}),e.qZA()(),e.TgZ(16,"fieldset",11)(17,"button",12),e._UZ(18,"i",13),e._uU(19," Log In "),e.qZA(),e.TgZ(20,"a",14),e._uU(21,"Register Here"),e.qZA()()()()()()}2&n&&(e.xp6(3),e.Q6J("ngIf",null!=o.errorMessage),e.xp6(8),e.Q6J("ngModel",o.user.username),e.xp6(4),e.Q6J("ngModel",o.user.password))},directives:[m.O5,s._Y,s.JL,s.F,s.Fj,s.Q7,s.JJ,s.On],encapsulation:2}),t})(),d=(()=>{class t{constructor(n,o){this.router=n,this.auth=o}canActivate(n,o){return this.auth.authenticated?(console.log("authenticated"),!0):(console.log("cannot authenticate"),this.router.navigate(["/admin/auth"]),!1)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(u.F0),e.LFG(l.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();const A=u.Bz.forChild([{path:"auth",component:f},{path:"main",component:(()=>{class t{constructor(n,o){this.auth=n,this.router=o}logout(){this.auth.logout(),this.router.navigateByUrl("/")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.e),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:7,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-2"],[1,"col-3"],[1,"d-grid","gap-2","col-12","mx-auto"],[1,"col-9"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," Secure Page "),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"router-outlet"),e.qZA()()())},directives:[u.lC],encapsulation:2}),t})(),canActivate:[d]},{path:"**",redirectTo:"auth"}]);let Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[d],imports:[[m.ez,s.u5,A]]}),t})()}}]);